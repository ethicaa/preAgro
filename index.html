<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroPec</title>
    <link rel="stylesheet" href="./main/index.css">
    <link rel="shortcut icon" href="./images/short-removebg-preview.png" />
</head>
<body>
    <!-- CONTEÚDO DO SITE-->
    <div class="web-content">
        <div class="hero-img">
            <img src="images/her.jpg" alt="">
        </div>
    </div>

    <nav>
        <div class="info">
            <p id="fol">Folio Vol.1</p>
        </div>
        <div class="logo">
            <p><a id="main" href="#">AgroPec</a></p>
        </div>
        <div class="toogle-btn">
            <button class="burger"
             onclick="this.classList.toggle('active');"
             ></button>
        </div>
    </nav>

    <div class="overlay">
        <div class="overlay-menu">
            <div class="menu-item">
                <p id="active"><a href="#">Home</a></p>
            </div>
            <div class="menu-item">
                <p><a class="download" download="Melhor Monografia Da História" href="./main/projeto final.pdf">Monografia</a></p>
            </div>
            <div class="menu-item">
                <p><a href="#">Site da empresa</a></p>
            </div>
        </div>

        <div class="sub-nav">
            <p><a href="#">Twitter</a></p>
            <p>.</p>
            <p><a href="#">Instagram</a></p>
            <p>.</p>
            <p><a href="#">Dribble</a></p>
            <p>.</p>
            <p><a href="#">Behance</a></p>
        </div>
    </div>


    <!-- TEXT CONTENT -->
    <div class="website-content">
        <div class="header">
            <div class="h1">
                <h1>AGRO</h1>
                <h1>PEC</h1>
            </div>
            <div class="header-revealer"></div>
        </div>
    </div>
   

    <!-- PRE-LOAD -->
    <div class="loading-screen">
        <div class="loader">
          <div class="loader-1 bar"></div>
          <div class="loader-2 bar"></div>
        </div>
        <div class="counter">
            <div class="counter-1 digit">
                <div class="num">0</div>
                <div class="num num1offset1">1</div>
            </div>
            <div class="counter-2 digit">
                <div class="num">0</div>
                <div class="num num1offset2">1</div>
                <div class="num">2</div>
                <div class="num">3</div>
                <div class="num">4</div>
                <div class="num">5</div>
                <div class="num">6</div>
                <div class="num">7</div>
                <div class="num">8</div>
                <div class="num">9</div>
                <div class="num">0</div>
            </div>
            <div class="counter-3 digit">
                <div class="num">0</div>
                <div class="num">1</div>
                <div class="num">2</div>
                <div class="num">3</div>
                <div class="num">4</div>
                <div class="num">5</div>
                <div class="num">6</div>
                <div class="num">7</div>
                <div class="num">8</div>
                <div class="num">9</div>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/gsap@3/dist/CSSRulePlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded',function(){
           const counter3 = document.querySelector('.counter-3');

           for(let i = 0; i < 2; i++){
            for(let j = 0; j < 10; j++){
                const div = document.createElement('div');
                div.className = 'num';
                div.textContent = j;
                counter3.appendChild(div);
            }
           }

           const finalDiv = document.createElement('div');
           finalDiv.className = 'num';
           finalDiv.textContent = '0';
           counter3.appendChild(finalDiv);
           
           function animate(counter, duration, delay = 0){
            const numHeight = counter.querySelector('.num').clientHeight;
            const totalDistance = (counter.querySelectorAll('.num').length -1) * numHeight;

            gsap.to(counter, {
                y: -totalDistance,
                duration: duration,
                delay: delay,
                ease: 'power2.inOut',
            });
           }

           animate(counter3, 5)
           animate(document.querySelector('.counter-2'), 6);
           animate(document.querySelector('.counter-1'), 2, 4);
        })

        gsap.to('.digit',{
           top:'-150px',
           stagger:{
            amount:0.25,
           },
           delay:6,
           duration:1,
           ease:'power4.inOut',
        })

        gsap.from('.loader-1', {
            width:0,
            duration:6,
            ease: 'power2,inOut',
        });

        gsap.from('.loader-2', {
            width:0,
            delay:1.9,
            duration:2,
            ease: 'power2,inOut',
        });

        gsap.to('.loader',{
            background:'none',
            delay:6,
            duration:0.1,
        });

        gsap.to('.loader-1', {
            rotate: 90,
            y: -50,
            duration:0.5,
            delay:6,
        });

        gsap.to('.loader-2', {
            x: -75,
            y:75,
            duration:0.5
        },
    '<');
    
        gsap.to('.loader',{
            scale:40,
            duration:1,
            delay:7,
            ease: 'power2.inOut'
        })

        gsap.to('.loader',{
            rotate:45,
            y:500,
            x:2000,
            duration:1,
            delay:7,
            ease: 'power2.inOut'
        })

        gsap.to('.loading-screen', {
            opacity:0,
            duration:0.5,
            delay:7.5,
            ease: 'power1.inOut',
        })

        gsap.to('h1', 1.5, {
            delay:7,
            y: -80,
            ease: 'power4.inOut',
            stagger: {
                amount: 0.1,
            },
        })


         
        //MENU SCRIPT
       document.addEventListener("DOMContentLoaded", function(){
        let activeItemIndicator = CSSRulePlugin.getRule('.menu-item p#active::after')
        const toogleButton = document.querySelector('.burger');
        let isOpen = false;

        gsap.set('.menu-item p', { y: 225});

        const timeline = gsap.timeline({paused: true});
        
        timeline.to("h1", { 
            opacity:0,
            ease: 'power4.inOut',
            duration: 0.5
        })

        timeline.to(".overlay", {
            duration: 1.5,
            clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
            ease: "power.inOut"
        });

        timeline.to(".menu-item p", {
            duration:1.5,
            y:0,
            stagger:0.2,
            ease: "power4.out"
        }, "-=1");

        timeline.to(activeItemIndicator, {
            width: "100%",
            duration: 1,
            ease: "power4.out",
            delay:0.5
        }, "<")

        timeline.to(".sub-nav", {
            bottom:"5%",
            opacity:1,
            duration: 0.5,
            delay: 0.5
        }, "<");

        toogleButton.addEventListener('click', function(){
            if(isOpen){
                timeline.reverse()
            }else{
                timeline.play()
            }
            isOpen = !isOpen;
        })



       })
     

    </script>

</body>
</html>